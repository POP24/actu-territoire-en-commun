<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>SDM DAO</title>
    <meta name="description" content="Financez ensemble les projets de vos territoires. Prix libre dès 10€." />
    <meta name="author" content="SDM DAO" />
    <link rel="icon" href="/lovable-uploads/dc8f2f4f-f279-4d5a-94d8-ae40b1c0ff3b.png" type="image/png">

    <meta property="og:title" content="SDM DAO" />
    <meta property="og:description" content="Financez ensemble les projets de vos territoires. Prix libre dès 10€." />
    <meta property="og:type" content="website" />
    <meta property="og:image" content="/lovable-uploads/dc8f2f4f-f279-4d5a-94d8-ae40b1c0ff3b.png" />

    <meta name="twitter:card" content="summary_large_image" />
    <meta name="twitter:title" content="SDM DAO" />
    <meta name="twitter:description" content="Financez ensemble les projets de vos territoires. Prix libre dès 10€." />
    <meta name="twitter:image" content="/lovable-uploads/dc8f2f4f-f279-4d5a-94d8-ae40b1c0ff3b.png" />
  </head>

  <body>
    <div id="root"></div>
    <script type="module" src="/src/main.tsx"></script>
    <!-- Landbot Fullpage Script -->
    <script SameSite="None; Secure" type="module" src="https://cdn.landbot.io/landbot-3/landbot-3.0.0.mjs"></script>
    
    <!-- Custom Chatbot Launcher -->
    <div id="custom-chatbot-launcher"></div>
    
    <style>
      /* Launcher personnalisé avec spécifications exactes */
      #custom-chatbot-launcher {
        position: fixed;
        bottom: 20px;
        right: 20px;
        width: 80px;
        height: 80px;
        background-image: url('/lovable-uploads/5817d468-330a-4484-82c1-8f805fced65b.png');
        background-size: cover;
        background-repeat: no-repeat;
        background-position: center;
        border-radius: 50%;
        border: 4px solid #FF8B00;
        box-shadow: 0 0 0 2px #FF8B00, 0 4px 12px rgba(255, 139, 0, 0.3);
        cursor: pointer;
        z-index: 999999;
        transition: all 0.3s cubic-bezier(0.4, 0, 0.2, 1);
      }
      
      /* Effet hover avec agrandissement et rotation */
      #custom-chatbot-launcher:hover {
        transform: scale(1.5) rotate(6deg);
        background: linear-gradient(135deg, #ff6b35, #f7931e, #ff8500);
        box-shadow: 0 8px 32px rgba(255, 139, 0, 0.4), 0 12px 40px rgba(255, 107, 53, 0.6);
      }
      
      /* Maintenir l'image du logo en overlay même en hover */
      #custom-chatbot-launcher::after {
        content: '';
        position: absolute;
        top: 0;
        left: 0;
        right: 0;
        bottom: 0;
        background-image: url('/lovable-uploads/5817d468-330a-4484-82c1-8f805fced65b.png');
        background-size: cover;
        background-repeat: no-repeat;
        background-position: center;
        border-radius: 50%;
        pointer-events: none;
        z-index: 1;
      }
      
      /* Container fullscreen pour Landbot */
      #landbot-fullscreen {
        display: none;
        position: fixed;
        top: 0;
        left: 0;
        width: 100vw;
        height: 100vh;
        z-index: 1000000;
        background: white;
      }
      
      #landbot-fullscreen.active {
        display: block;
      }
      
      /* Bouton de fermeture */
      #close-landbot {
        position: absolute;
        top: 20px;
        right: 20px;
        width: 40px;
        height: 40px;
        background: #FF8B00;
        color: white;
        border: none;
        border-radius: 50%;
        cursor: pointer;
        z-index: 1000001;
        font-size: 20px;
        display: flex;
        align-items: center;
        justify-content: center;
      }
    </style>
    
    <script type="module">
      let myLandbot;
      let isLandbotOpen = false;
      
      // Initialiser le launcher personnalisé
      document.addEventListener('DOMContentLoaded', function() {
        const launcher = document.getElementById('custom-chatbot-launcher');
        
        // Créer le container fullscreen
        const fullscreenContainer = document.createElement('div');
        fullscreenContainer.id = 'landbot-fullscreen';
        fullscreenContainer.innerHTML = `
          <button id="close-landbot">×</button>
          <div id="landbot-container" style="width: 100%; height: 100%;"></div>
        `;
        document.body.appendChild(fullscreenContainer);
        
        // Event listener pour ouvrir le chatbot
        launcher.addEventListener('click', function() {
          if (!isLandbotOpen) {
            openLandbot();
          }
        });
        
        // Event listener pour fermer le chatbot
        document.getElementById('close-landbot').addEventListener('click', function() {
          closeLandbot();
        });
      });
      
      // Fonction pour ouvrir le Landbot fullscreen
      function openLandbot() {
        if (!myLandbot) {
          // Initialiser Landbot en mode fullscreen
          myLandbot = new Landbot.Container({
            container: '#landbot-container',
            configUrl: 'https://storage.googleapis.com/landbot.pro/v3/H-2624889-3OOHST8FZXKRYDFL/index.json',
          });
        }
        
        // Afficher le container fullscreen
        document.getElementById('landbot-fullscreen').classList.add('active');
        isLandbotOpen = true;
        
        // Empêcher le scroll du body
        document.body.style.overflow = 'hidden';
      }
      
      // Fonction pour fermer le Landbot
      function closeLandbot() {
        document.getElementById('landbot-fullscreen').classList.remove('active');
        isLandbotOpen = false;
        
        // Restaurer le scroll du body
        document.body.style.overflow = '';
      }
      
      // Fermer avec Escape
      document.addEventListener('keydown', function(e) {
        if (e.key === 'Escape' && isLandbotOpen) {
          closeLandbot();
        }
      });
    </script>
  </body>
</html>
